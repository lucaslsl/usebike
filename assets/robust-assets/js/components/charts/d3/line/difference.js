$(window).on("load",function(){function a(){d=b.node().getBoundingClientRect().width-c.left-c.right,m.attr("width",d+c.left+c.right),n.attr("width",d+c.left+c.right),g.range([0,d]),n.selectAll(".d3-xaxis").call(i),n.selectAll(".d3-area").attr("d",l)}var b=d3.select("#difference-chart"),c={top:20,right:20,bottom:30,left:50},d=b.node().getBoundingClientRect().width-c.left-c.right,e=500-c.top-c.bottom,f=d3.time.format("%Y%m%d").parse,g=d3.time.scale().range([0,d]),h=d3.scale.linear().range([e,0]),i=d3.svg.axis().scale(g).orient("bottom"),j=d3.svg.axis().scale(h).orient("left"),k=d3.svg.area().interpolate("basis").x(function(a){return g(a.date)}).y(function(a){return h(a["New York"])}),l=d3.svg.area().interpolate("basis").x(function(a){return g(a.date)}).y1(function(a){return h(a["New York"])}),m=b.append("svg"),n=m.attr("width",d+c.left+c.right).attr("height",e+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")");d3.tsv("robust-assets/demo-data/d3/line/difference.tsv",function(a,b){if(a)throw a;b.forEach(function(a){a.date=f(a.date),a["New York"]=+a["New York"],a["San Francisco"]=+a["San Francisco"]}),g.domain(d3.extent(b,function(a){return a.date})),h.domain([d3.min(b,function(a){return Math.min(a["New York"],a["San Francisco"])}),d3.max(b,function(a){return Math.max(a["New York"],a["San Francisco"])})]),n.datum(b),n.append("clipPath").attr("id","clip-below").append("path").attr("d",l.y0(e)),n.append("clipPath").attr("id","clip-above").append("path").attr("d",l.y0(0)),n.append("path").attr("class","d3-area above").attr("clip-path","url(#clip-above)").attr("d",l.y0(function(a){return h(a["San Francisco"])})).style("fill","#00BCD4"),n.append("path").attr("class","d3-area below").attr("clip-path","url(#clip-below)").attr("d",l).style("fill","#E91E63"),n.append("path").attr("class","d3-line").attr("d",k),n.append("g").attr("class","d3-axis d3-xaxis").attr("transform","translate(0,"+e+")").call(i),n.append("g").attr("class","d3-axis d3-yaxis").call(j).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("fill","#666").style("font-size",12).text("Temperature (ÂºF)")}),$(window).on("resize",a),$(".menu-toggle").on("click",a)});