$(window).on("load",function(){function a(){e=c.node().getBoundingClientRect().width-d.left-d.right,n.attr("width",e+d.left+d.right),o.attr("width",e+d.left+d.right),h.range([0,e]),o.selectAll(".d3-xaxis").call(k),b.selectAll(".d3-line").attr("d",function(a){return m(a.values)})}var b,c=d3.select("#multi-series-line"),d={top:20,right:20,bottom:30,left:50},e=c.node().getBoundingClientRect().width-d.left-d.right,f=500-d.top-d.bottom,g=d3.time.format("%Y%m%d").parse,h=d3.time.scale().range([0,e]),i=d3.scale.linear().range([f,0]),j=d3.scale.ordinal().range(["#673AB7","#00BCD4","#FF5722"]),k=d3.svg.axis().scale(h).orient("bottom"),l=d3.svg.axis().scale(i).orient("left"),m=d3.svg.line().interpolate("basis").x(function(a){return h(a.date)}).y(function(a){return i(a.temperature)}),n=c.append("svg"),o=n.attr("width",e+d.left+d.right).attr("height",f+d.top+d.bottom).append("g").attr("transform","translate("+d.left+","+d.top+")");d3.tsv("robust-assets/demo-data/d3/line/multi-series-line.tsv",function(a,c){if(a)throw a;j.domain(d3.keys(c[0]).filter(function(a){return"date"!==a})),c.forEach(function(a){a.date=g(a.date)});var d=j.domain().map(function(a){return{name:a,values:c.map(function(b){return{date:b.date,temperature:+b[a]}})}});h.domain(d3.extent(c,function(a){return a.date})),i.domain([d3.min(d,function(a){return d3.min(a.values,function(a){return a.temperature})}),d3.max(d,function(a){return d3.max(a.values,function(a){return a.temperature})})]),o.append("g").attr("class","d3-axis d3-xaxis").attr("transform","translate(0,"+f+")").call(k),o.append("g").attr("class","d3-axis d3-yaxis").call(l).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("fill","#666").style("font-size",12).text("Temperature (ÂºF)"),b=o.selectAll(".city").data(d).enter().append("g").attr("class","city"),b.append("path").attr("class","d3-line").attr("d",function(a){return m(a.values)}).style("fill","none").style("stroke-width",2).style("stroke",function(a){return j(a.name)}),b.append("text").datum(function(a){return{name:a.name,value:a.values[a.values.length-1]}}).attr("transform",function(a){return"translate("+h(a.value.date)+","+i(a.value.temperature)+")"}).attr("x",3).attr("dy",".35em").text(function(a){return a.name})}),$(window).on("resize",a),$(".menu-toggle").on("click",a)});