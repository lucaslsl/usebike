$(window).on("load",function(){function a(){e=c.node().getBoundingClientRect().width-d.left-d.right,p.attr("width",e+d.left+d.right),q.attr("width",e+d.left+d.right),i.range([0,e]),q.selectAll(".d3-xaxis").call(l),b.selectAll(".d3-area").attr("d",function(a){return n(a.values)})}var b,c=d3.select("#stacked-area"),d={top:20,right:20,bottom:30,left:50},e=c.node().getBoundingClientRect().width-d.left-d.right,f=500-d.top-d.bottom,g=d3.time.format("%y-%b-%d").parse,h=d3.format(".0%"),i=d3.time.scale().range([0,e]),j=d3.scale.linear().range([f,0]),k=d3.scale.ordinal().range(["#99B898","#FECEA8","#FF847C","#E84A5F","#2A363B"]),l=d3.svg.axis().scale(i).orient("bottom"),m=d3.svg.axis().scale(j).orient("left").tickFormat(h),n=d3.svg.area().x(function(a){return i(a.date)}).y0(function(a){return j(a.y0)}).y1(function(a){return j(a.y0+a.y)}),o=d3.layout.stack().values(function(a){return a.values}),p=c.append("svg"),q=p.attr("width",e+d.left+d.right).attr("height",f+d.top+d.bottom).append("g").attr("transform","translate("+d.left+","+d.top+")");d3.tsv("robust-assets/demo-data/d3/line/stacked-area.tsv",function(a,c){if(a)throw a;k.domain(d3.keys(c[0]).filter(function(a){return"date"!==a})),c.forEach(function(a){a.date=g(a.date)});var d=o(k.domain().map(function(a){return{name:a,values:c.map(function(b){return{date:b.date,y:b[a]/100}})}}));i.domain(d3.extent(c,function(a){return a.date})),b=q.selectAll(".browser").data(d).enter().append("g").attr("class","browser"),b.append("path").attr("class","d3-area").attr("d",function(a){return n(a.values)}).style("fill",function(a){return k(a.name)}),b.append("text").datum(function(a){return{name:a.name,value:a.values[a.values.length-1]}}).attr("transform",function(a){return"translate("+i(a.value.date)+","+j(a.value.y0+a.value.y/2)+")"}).attr("x",-6).attr("dy",".35em").style("fill","#666").style("font-size",12).text(function(a){return a.name}),q.append("g").attr("class","d3-axis d3-xaxis").attr("transform","translate(0,"+f+")").call(l),q.append("g").attr("class","d3-axis d3-yaxis").call(m)}),$(window).on("resize",a),$(".menu-toggle").on("click",a)});