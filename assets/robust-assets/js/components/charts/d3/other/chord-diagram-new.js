$(window).on("load",function(){function a(a){var b=(a.endAngle-a.startAngle)/a.value;return d3.range(0,a.value,50).map(function(c,d){return{angle:c*b+a.startAngle,label:d%2?null:c}})}function b(a,b){return function(c,d){b.selectAll(".d3-chord path").filter(function(a){return a.source.index!=d&&a.target.index!=d}).transition().style("opacity",a)}}var c=[[6,32,47,81,31,89,24,68,50,39],[37,83,57,80,87,7,85,7,68,17],[50,15,31,3,1,85,36,95,83,99],[37,25,37,81,72,98,32,13,70,25],[19,99,97,79,74,43,78,18,4,57],[77,2,87,41,93,52,6,42,11,76],[44,54,60,69,36,44,76,58,50,16]],d=d3.select("#chord-diagram"),e=800,f=800,g=.37*Math.min(e,f),h=1.1*g,i=d3.scale.ordinal().range(["#99B898","#FECEA8","#FF847C","#E84A5F","#F8B195","#F67280","#C06C84"]),j=d3.layout.chord().padding(.05).sortSubgroups(d3.descending).matrix(c),k=d.append("svg").attr("width",e).attr("height",f).append("g").attr("transform","translate("+e/2+","+f/2+")");k.append("g").selectAll(".chord-path").data(j.groups).enter().append("path").attr("class","chord-path").style("fill",function(a){return i(a.index)}).style("stroke",function(a){return i(a.index)}).attr("d",d3.svg.arc().innerRadius(g).outerRadius(h)).on("mouseover",b(.1,k)).on("mouseout",b(1,k));var l=k.append("g").selectAll("g").data(j.groups).enter().append("g").selectAll("g").data(a).enter().append("g").attr("transform",function(a){return"rotate("+(180*a.angle/Math.PI-90)+")translate("+h+",0)"});l.append("line").attr("x1",1).attr("y1",0).attr("x2",5).attr("y2",0).style("stroke","#2A363B"),l.append("text").attr("x",8).attr("dy",".35em").attr("text-anchor",function(a){return a.angle>Math.PI?"end":null}).attr("transform",function(a){return a.angle>Math.PI?"rotate(180)translate(-16)":null}).style("font-size",12).text(function(a){return a.label}),k.append("g").attr("class","d3-chord").selectAll("path").data(j.chords).enter().append("path").style("fill",function(a){return i(a.target.index)}).style("stroke","#000").style("stroke-width",.5).style("fill-opacity",.7).attr("d",d3.svg.chord().radius(g)).style("opacity",1)});