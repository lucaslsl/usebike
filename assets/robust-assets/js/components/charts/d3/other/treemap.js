$(window).on("load",function(){function a(){this.style("left",function(a){return a.x+"px"}).style("top",function(a){return a.y+"px"}).style("width",function(a){return Math.max(0,a.dx-1)+"px"}).style("height",function(a){return Math.max(0,a.dy-1)+"px"})}var b=d3.select("#treemap"),c={top:20,right:20,bottom:30,left:50},d=b.node().getBoundingClientRect().width-c.left-c.right,e=500-c.top-c.bottom,f=d3.scale.ordinal().range(["#99B898","#FECEA8","#FF847C","#E84A5F","#F8B195","#F67280","#C06C84"]),g=d3.layout.treemap().size([d,e]).sticky(!0).value(function(a){return a.size}),h=b.append("div"),i=h.style("position","relative").style("width",d+c.left+c.right+"px").style("height",e+c.top+c.bottom+"px").style("left",c.left+"px").style("top",c.top+"px");d3.json("robust-assets/demo-data/d3/other/treemap.json",function(b,c){if(b)throw b;var d=i.datum(c).selectAll(".node").data(g.nodes).enter().append("div").attr("class","node").call(a).style("background",function(a){return a.children?f(a.name):null}).style("border","solid 1px white").style("font-size","10px").style("line-height","12px").style("overflow","hidden").style("position","absolute").style("text-indent","2px").style("color","#000").text(function(a){return a.children?null:a.name});d3.selectAll("input").on("change",function(){var b="count"===this.value?function(){return 1}:function(a){return a.size};d.data(g.value(b).nodes).transition().duration(1500).call(a)})})});