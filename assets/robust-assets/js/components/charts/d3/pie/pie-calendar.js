$(window).on("load",function(){function a(){h.decrementCounter(),c()}function b(){h.incrementCounter(),c()}function c(a,b){$("#currentMonth").text(h.monthToDisplayAsText()+" "+h.yearToDisplay());var c=h.daysInMonth(),e=h.gridCellPositions;h.datesGroup.selectAll("text").data(c).attr("x",function(a,b){return e[b][0]}).attr("y",function(a,b){return e[b][1]}).attr("dx",20).attr("dy",20).attr("transform","translate("+h.gridXTranslation+","+h.gridYTranslation+")").text(function(a){return a[0]}),h.calendar.selectAll("rect").data(c).style("fill",function(a){return a[1]}),d()}function d(){var a=e(),b=h.cellWidth/3,c=0,d=d3.layout.pie(),f=d3.scale.ordinal().range(["#99B898","#FECEA8","#FF847C","#E84A5F","#F8B195","#F67280","#C06C84"]),g=d3.svg.arc().innerRadius(c).outerRadius(b),k=[];for(i=0;i<a.length;i++){var l=d(a[i]);for(j=0;j<l.length;j++)k.push([l[j],i,j])}var m=h.gridCellPositions;h.chartsGroup.selectAll("g.arc").remove();var n=h.chartsGroup.selectAll("g.arc").data(k).enter().append("g").attr("class","arc").attr("transform",function(a){var c=a[1];return"translate("+(b+5*h.gridXTranslation+m[c][0])+", "+(b+1.25*h.gridYTranslation+m[c][1])+")"});n.append("path").attr("fill",function(a,b){return f(a[2])}).attr("d",function(a,b){return g(a[0])}),n.append("text").attr("transform",function(a,b){return"translate("+g.centroid(a[0])+")"}).attr("text-anchor","middle").text(function(a,b){return a[0].value}).style("fill","#FFF")}function e(){for(var a=[],b=0;b<35;b++)a.push([Math.floor(100*Math.random()),Math.floor(100*Math.random()),Math.floor(100*Math.random())]);return a}function f(a,b){h.calendar=d3.select("#pie-calendar").append("svg").attr("class","calendar").attr("width",h.calendarWidth).attr("height",h.calendarHeight).append("g");var c=h.gridCellPositions;h.calendar.selectAll("rect").data(c).enter().append("rect").attr("x",function(a){return a[0]}).attr("y",function(a){return a[1]}).attr("width",h.cellWidth).attr("height",h.cellHeight).style("stroke","#555").style("fill","white").attr("transform","translate("+h.gridXTranslation+","+h.gridYTranslation+")");var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];h.calendar.selectAll("headers").data([0,1,2,3,4,5,6]).enter().append("text").attr("x",function(a){return c[a][0]}).attr("y",function(a){return c[a][1]}).attr("dx",h.gridXTranslation+5).attr("dy",30).text(function(a){return e[a]}),h.datesGroup=h.calendar.append("svg:g");var f=h.daysInMonth();h.datesGroup.selectAll("daysText").data(f).enter().append("text").attr("x",function(a,b){return c[b][0]}).attr("y",function(a,b){return c[b][1]}).attr("dx",20).attr("dy",20).attr("transform","translate("+h.gridXTranslation+","+h.gridYTranslation+")").text(function(a){return a[0]}),h.chartsGroup=h.calendar.append("svg:g"),d()}function g(){width=ele.node().getBoundingClientRect().width-margin.left-margin.right,container.attr("width",width+margin.left+margin.right),svg.attr("width",width+margin.left+margin.right),x.range([0,width]),svg.selectAll(".d3-xaxis").call(xAxis),svg.selectAll(".d3-line").attr("d",line)}var h=function(){function a(){return t}function b(){return u}function c(){return v}function d(){return w}function e(){return t-10}function f(){return u-40}function g(){return e()/7}function h(){return f()/5}function j(){return s}function k(a){s=a}function l(){B+=1}function m(){B-=1}function n(){var a=new Date;return a.setMonth(C+B),a.getMonth()}function o(){return D[n()]}function p(){var a=new Date;return a.setMonth(C+B),a.getFullYear()}function q(){var a=[];for(y=0;y<5;y++)for(x=0;x<7;x++)a.push([x*g(),y*h()]);return a}function r(){var a=[],b=new Date(p(),n(),1).getDay(),c=new Date(p(),n(),0).getDate();for(i=1;i<=b;i++)a.push([c-b+i,z]);var d=new Date(p(),n()+1,0).getDate();for(i=1;i<=d;i++)a.push([i,A]);var e=35-a.length;for(i=1;i<=e;i++)a.push([i,z]);return a.slice(0,35)}var s,t=(d3.select("#pie-calendar"),1380),u=820,v=10,w=40,z="#EAEAEA",A="#FFFFFF",B=0,C=(new Date).getMonth(),D=["January","February","March","April","May","June","July","August","September","October","November","December"];return{calendarWidth:a(),calendarHeight:b(),gridXTranslation:c(),gridYTranslation:d(),gridWidth:e(),gridHeight:f(),cellWidth:g(),cellHeight:h(),getDatesGroup:j,setDatesGroup:k,incrementCounter:l,decrementCounter:m,monthToDisplay:n(),monthToDisplayAsText:o,yearToDisplay:p,gridCellPositions:q(),daysInMonth:r}}();$(document).ready(function(){f(),c(),$("#back").on("click",a),$("#forward").on("click",b)}),$(window).on("resize",g),$(".menu-toggle").on("click",g)});