$(window).on("load",function(){function a(m){function n(){f=d.node().getBoundingClientRect().width-e.left-e.right,p=k.nodes(c),links=k.links(p),i.attr("width",f+e.left+e.right),j.attr("width",f+e.left+e.right),k.size([g,f-180]),l.projection(function(a){return[a.y,a.x]}),j.selectAll(".d3-tree-link").attr("d",l),j.selectAll(".d3-tree-node").attr("transform",function(a){return"translate("+a.y+","+a.x+")"})}var o=d3.event&&d3.event.altKey?5e3:500,p=k.nodes(c).reverse(),q=j.selectAll(".d3-tree-node").data(p,function(a){return a.id||(a.id=++h)}),r=q.enter().append("g").attr("class","d3-tree-node").attr("transform",function(a){return"translate("+m.y0+","+m.x0+")"}).on("click",function(c){b(c),a(c)});r.append("circle").attr("r",1e-6).style("fill","#fff").style("stroke","#E84A5F").style("stroke-width",1.5).style("cursor","pointer").style("fill",function(a){return a._children?"#E84A5F":"#fff"}),r.append("text").attr("x",function(a){return a.children||a._children?-10:10}).attr("dy",".35em").style("text-anchor",function(a){return a.children||a._children?"end":"start"}).style("font-size",12).style("fill-opacity",1e-6).text(function(a){return a.name});var s=q.transition().duration(o).attr("transform",function(a){return"translate("+a.y+","+a.x+")"});s.select("circle").attr("r",4.5).style("fill",function(a){return a._children?"#E84A5F":"#fff"}),s.select("text").style("fill-opacity",1);var t=q.exit().transition().duration(o).attr("transform",function(a){return"translate("+m.y+","+m.x+")"}).remove();t.select("circle").attr("r",1e-6),t.select("text").style("fill-opacity",1e-6);var u=j.selectAll(".d3-tree-link").data(k.links(p),function(a){return a.target.id});u.enter().insert("path","g").attr("class","d3-tree-link").style("fill","none").style("stroke","#e3e3e3").style("stroke-width",1.5).attr("d",function(a){var b={x:m.x0,y:m.y0};return l({source:b,target:b})}).transition().duration(o).attr("d",l),u.transition().duration(o).attr("d",l),u.exit().transition().duration(o).attr("d",function(a){var b={x:m.x,y:m.y};return l({source:b,target:b})}).remove(),p.forEach(function(a){a.x0=a.x,a.y0=a.y}),$(window).on("resize",n),$(".menu-toggle, .d3-tree-node circle").on("click",n)}function b(a){a.children?(a._children=a.children,a.children=null):(a.children=a._children,a._children=null)}var c,d=d3.select("#collapsible-tree"),e={top:20,right:20,bottom:30,left:50},f=d.node().getBoundingClientRect().width-e.left-e.right,g=600-e.top-e.bottom,h=0,i=d.append("svg"),j=i.attr("width",f+e.left+e.right).attr("height",g+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")"),k=d3.layout.tree().size([g,f-180]),l=d3.svg.diagonal().projection(function(a){return[a.y,a.x]});d3.json("robust-assets/demo-data/d3/tree/collapsible-tree.json",function(d,e){function f(a){a.children&&(a.children.forEach(f),b(a))}c=e,c.x0=g/2,c.y0=0,c.children.forEach(f),b(c.children[1]),b(c.children[1].children[2]),b(c.children[9]),b(c.children[9].children[0]),a(c)})});