var initPhotoSwipeFromDOM=function(a){for(var b=function(a){for(var b,c,d,e,f=a.childNodes,g=f.length,h=[],i=0;i<g;i++)b=f[i],1===b.nodeType&&(c=b.children[0],d=c.getAttribute("data-size").split("x"),e={src:c.getAttribute("href"),w:parseInt(d[0],10),h:parseInt(d[1],10)},b.children.length>1&&(e.title=b.children[1].innerHTML),c.children.length>0&&(e.msrc=c.children[0].getAttribute("src")),e.el=b,h.push(e));return h},c=function k(a,b){return a&&(b(a)?a:k(a.parentNode,b))},d=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.target||a.srcElement,d=c(b,function(a){return a.tagName&&"FIGURE"===a.tagName.toUpperCase()});if(d){for(var e,g=d.parentNode,h=d.parentNode.childNodes,i=h.length,j=0,k=0;k<i;k++)if(1===h[k].nodeType){if(h[k]===d){e=j;break}j++}return e>=0&&f(e,g),!1}},e=function(){var a=window.location.hash.substring(1),b={};if(a.length<5)return b;for(var c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");e.length<2||(b[e[0]]=e[1])}return b.gid&&(b.gid=parseInt(b.gid,10)),b},f=function(a,c,d,e){var f,g,h,i=document.querySelectorAll(".pswp")[0];if(h=b(c),g={galleryUID:c.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(a){var b=h[a].el.getElementsByTagName("img")[0],c=window.pageYOffset||document.documentElement.scrollTop,d=b.getBoundingClientRect();return{x:d.left,y:d.top+c,w:d.width}}},e)if(g.galleryPIDs){for(var j=0;j<h.length;j++)if(h[j].pid==a){g.index=j;break}}else g.index=parseInt(a,10)-1;else g.index=parseInt(a,10);isNaN(g.index)||(d&&(g.showAnimationDuration=0),f=new PhotoSwipe(i,PhotoSwipeUI_Default,h,g),f.init())},g=document.querySelectorAll(a),h=0,i=g.length;h<i;h++)g[h].setAttribute("data-pswp-uid",h+1),g[h].onclick=d;var j=e();j.pid&&j.gid&&f(j.pid,g[j.gid-1],!0,!0)};$("document").ready(function(){initPhotoSwipeFromDOM(".my-gallery"),$(".masonry-grid").length>0&&$(".masonry-grid").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer"})});